<!DOCTYPE html>
<html>
<head>
    <title>Beats Store</title>
</head>
<body>
    <h1>Welcome to My Beats Store</h1>
    
    <div>
        <h2>Chill Vibes - $20</h2>
        <button onclick="purchaseBeat(1)">Buy Now</button>
    </div>

    <div>
        <h2>Trap Banger - $35</h2>
        <button onclick="purchaseBeat(2)">Buy Now</button>
    </div>

    <div style="margin-top: 40px;">
        <h2>Upload Your Beat</h2>
        <button onclick="navigateToUpload()">Upload a New Beat</button>
    </div>

    <script>
        async function purchaseBeat(beatId) {
            const response = await fetch('https://2w88t35keh.execute-api.us-east-1.amazonaws.com/dev/beats-list', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ beatId })
            });
            
            const data = await response.json();
            
            if (data.url) {
                window.location.href = data.url;
            } else {
                alert("Error creating checkout session");
            }
        }

        function navigateToUpload() {
            window.location.href = 'upload.html';
        }
    </script>
</body>
</html>

